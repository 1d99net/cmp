<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Installation Instruction &mdash; Connectome Mapper v1.0 documentation</title>
    <link rel="stylesheet" href="_static/sphinxdoc.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '#',
        VERSION:     '1.0',
        COLLAPSE_MODINDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <link rel="top" title="Connectome Mapper v1.0 documentation" href="index.html" />
    <link rel="next" title="Connectome Mapper Stages" href="mappingsteps.html" />
    <link rel="prev" title="Connectome Mapper" href="index.html" /> 
  </head>
  <body>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="mappingsteps.html" title="Connectome Mapper Stages"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="index.html" title="Connectome Mapper"
             accesskey="P">previous</a> |</li>
        <li><a href="index.html">Connectome Mapper v1.0 documentation</a> &raquo;</li> 
      </ul>
    </div>
      <div class="sphinxsidebar">
        <div class="sphinxsidebarwrapper">
            <h3><a href="index.html">Table Of Contents</a></h3>
            <ul>
<li><a class="reference external" href="#">Installation Instruction</a><ul>
<li><a class="reference external" href="#step-by-step-guide-for-installation-on-ubuntu-debian">Step-by-Step Guide for Installation on Ubuntu/Debian</a></li>
<li><a class="reference external" href="#project-configuration-and-setup">Project configuration and setup</a></li>
<li><a class="reference external" href="#starting-the-pipeline-without-gui">Starting the pipeline without GUI</a></li>
</ul>
</li>
</ul>

            <h4>Previous topic</h4>
            <p class="topless"><a href="index.html"
                                  title="previous chapter">Connectome Mapper</a></p>
            <h4>Next topic</h4>
            <p class="topless"><a href="mappingsteps.html"
                                  title="next chapter">Connectome Mapper Stages</a></p>
            <h3>This Page</h3>
            <ul class="this-page-menu">
              <li><a href="_sources/installation.txt"
                     rel="nofollow">Show Source</a></li>
            </ul>
          <div id="searchbox" style="display: none">
            <h3>Quick search</h3>
              <form class="search" action="search.html" method="get">
                <input type="text" name="q" size="18" />
                <input type="submit" value="Go" />
                <input type="hidden" name="check_keywords" value="yes" />
                <input type="hidden" name="area" value="default" />
              </form>
              <p class="searchtip" style="font-size: 90%">
              Enter search terms or a module, class or function name.
              </p>
          </div>
          <script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body">
            
  <div class="section" id="installation-instruction">
<h1>Installation Instruction<a class="headerlink" href="#installation-instruction" title="Permalink to this headline">¶</a></h1>
<div class="section" id="step-by-step-guide-for-installation-on-ubuntu-debian">
<h2>Step-by-Step Guide for Installation on Ubuntu/Debian<a class="headerlink" href="#step-by-step-guide-for-installation-on-ubuntu-debian" title="Permalink to this headline">¶</a></h2>
<p>Install Diffusion Toolkit:</p>
<div class="highlight-python"><pre>firefox http://trackvis.org/dtk/</pre>
</div>
<p>Install Freesurfer 5.0:</p>
<div class="highlight-python"><pre>firefox http://surfer.nmr.mgh.harvard.edu/fswiki/DownloadAndInstall</pre>
</div>
<p>Now, add the NeuroDebian repository to your system. The steps are explained here:</p>
<div class="highlight-python"><pre>firefox http://neuro.debian.net/</pre>
</div>
<p>Install FMRIB Software Library. Using the version in the NeuroDebian repository:</p>
<div class="highlight-python"><pre>sudo apt-get install fsl fslview fslview-doc</pre>
</div>
<p>We need the Python package Nibabel and Python-DICOM for neuroimaging file input-output:</p>
<div class="highlight-python"><pre>sudo apt-get install python-nibabel python-nibabel-doc python-dicom</pre>
</div>
<p>If you have not yet done so, install IPython for an advanced interactive Python shell:</p>
<div class="highlight-python"><pre>sudo apt-get install ipython</pre>
</div>
<p>Install now the Connectome Mapper pipeline:</p>
<div class="highlight-python"><pre>sudo apt-get install connectomemapper</pre>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">The Connectome Mapper is not yet packaged in Neuro Debian. You can download the source code
from the <a class="reference external" href="http://github.com/LTS5/connectomemapper">GitHub page</a> and install it with <em>python setup.py install</em></p>
</div>
<p>At this point, make sure that you have setup the environment variables correctly for the
external packages such as Freesurfer and Diffusion Toolkit (The FSL environment variables should
be set automatically when installing FSL as described above). You should have the environment
variables: FREESURFER_HOME and DTDIR and FSL_HOME. You can check this if you enter in the bash
shell (terminal), they should give you the correct path to your packages:</p>
<div class="highlight-python"><pre>echo $FREESURFER_HOME
echo $FSL_HOME
echo $DTDIR</pre>
</div>
<p>In case, you have to updated your bash configuration.:</p>
<div class="highlight-python"><pre>gedit /home/username/.bashrc</pre>
</div>
<p>The should contain something similar as (adapted to your installation paths):</p>
<div class="highlight-python"><pre># FREESURFER configuration
export FREESURFER_HOME="/usr/share/freesurfer"
source "${FREESURFER_HOME}/SetUpFreeSurfer.sh"

# DIFFUSION TOOLKIT configuration
export DTDIR="/usr/share/dtk"
export PATH="${DTDIR}:${PATH}"</pre>
</div>
<p>Now, you are ready to start the Connectome Mapper:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">connectomemapper</span>
</pre></div>
</div>
</div>
<div class="section" id="project-configuration-and-setup">
<h2>Project configuration and setup<a class="headerlink" href="#project-configuration-and-setup" title="Permalink to this headline">¶</a></h2>
<p>Steps to do before executing the pipeline</p>
<ol class="arabic">
<li><p class="first">Create the folder structure for your project for DSI data. For DTI data, rename the folder DSI to DTI.:</p>
<div class="highlight-python"><pre>├── myproject
│   ├── control001
│   │   └── tp1
│   │       ├── RAWDATA
│   │       │   ├── DSI
│   │       │   ├── T1
│   │       │   └── T2</pre>
</div>
</li>
<li><p class="first">Copy the Diffusion / MPRAGE (DSI, DTI, T1, T2) images (DICOM series) in the corresponding folders.
The T2 images are optional but they improve the registration of the data.</p>
</li>
<li><p class="first">Run the Connectome Mapper and configure it for your project:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">connectomemapper</span>
</pre></div>
</div>
</li>
<li><p class="first">After the first run of the e.g. the first module DICOM Converter, the folder structure should look like this:</p>
<div class="highlight-python"><pre>├── myproject
│   ├── control001
│   │   └── tp1
│   │       ├── CMP
│   │       │   ├── fibers
│   │       │   ├── fs_output
│   │       │   ├── raw_diffusion
│   │       │   └── scalars
│   │       ├── FREESURFER
│   │       │   └── mri
│   │       ├── LOG
│   │       ├── NIFTI
│   │       ├── RAWDATA
│   │       │   ├── DSI
│   │       │   ├── T1
│   │       │   └── T2
│   │       └── STATS</pre>
</div>
</li>
</ol>
<p>All the files for your subject will be stored in this folder structure.</p>
<p>In the GUI, now you should setup all the parameters for your your single subject and hit the <em>Map connectome!</em> button.</p>
<p>If you have to restart the GUI later and do not want to enter everything again, you can open the LOG folder,
there are so-called pickle files with ending .pkl and you can load them with the <em>Load</em> button in the GUI to restore your configuration state.</p>
<p>If you run into any problems, do not hesitate to send an email with the error description to info AT connectomics DOT org.</p>
</div>
<div class="section" id="starting-the-pipeline-without-gui">
<h2>Starting the pipeline without GUI<a class="headerlink" href="#starting-the-pipeline-without-gui" title="Permalink to this headline">¶</a></h2>
<p>You can start the pipeline also from IPython or in a script. You can find an map_connectome.py example file
in the source code repository in /example/default_project/map_connectome.py.</p>
<p>You can start to modify this script to loop over subjects and/or load the &#8220;pickle&#8221; file automatically, add:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">from</span> <span class="nn">cmp.gui</span> <span class="kn">import</span> <span class="n">CMPGUI</span>
<span class="n">cmpgui</span> <span class="o">=</span> <span class="n">CMPGUI</span><span class="p">()</span>
<span class="n">cmpgui</span><span class="o">.</span><span class="n">load_state</span><span class="p">(</span><span class="s">&#39;/path/to/your/pickle/state/LOG/cmp.pkl&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>You can set the attributes of the cmpgui configuration object in the script and directly call the pipeline execution engine:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">cmpgui</span><span class="o">.</span><span class="n">active_dicomconverter</span> <span class="o">=</span> <span class="bp">True</span>
<span class="n">cmpgui</span><span class="o">.</span><span class="n">project_name</span> <span class="o">=</span> <span class="s">&#39;...&#39;</span>
<span class="n">cmpgui</span><span class="o">.</span><span class="n">project_dir</span> <span class="o">=</span> <span class="s">&#39;.../&#39;</span>
<span class="n">cmpgui</span><span class="o">.</span><span class="n">subject_name</span> <span class="o">=</span> <span class="s">&#39;...&#39;</span>
<span class="n">cmpgui</span><span class="o">.</span><span class="n">subject_timepoint</span> <span class="o">=</span> <span class="s">&#39;...&#39;</span>
<span class="n">cmpgui</span><span class="o">.</span><span class="n">subject_workingdir</span> <span class="o">=</span> <span class="s">&#39;.../&#39;</span>
<span class="nb">cmp</span><span class="o">.</span><span class="n">connectome</span><span class="o">.</span><span class="n">mapit</span><span class="p">(</span><span class="n">cmpgui</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="mappingsteps.html" title="Connectome Mapper Stages"
             >next</a> |</li>
        <li class="right" >
          <a href="index.html" title="Connectome Mapper"
             >previous</a> |</li>
        <li><a href="index.html">Connectome Mapper v1.0 documentation</a> &raquo;</li> 
      </ul>
    </div>
    <div class="footer">
      &copy; Copyright 2011, EPFL &amp; UNIL-CHUV.
      Created using <a href="http://sphinx.pocoo.org/">Sphinx</a> 0.6.4.
    </div>
  </body>
</html>